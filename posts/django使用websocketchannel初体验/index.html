<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> Django使用Websocket,Channel初体验 | AuuuNya Blog</title>
  <link rel = 'canonical' href = 'https://zyy.im/posts/django%E4%BD%BF%E7%94%A8websocketchannel%E5%88%9D%E4%BD%93%E9%AA%8C/'>
  <meta name="description" content="只会写Hello,World的菜鸟">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:title" content="Django使用Websocket,Channel初体验" />
<meta property="og:description" content="很久都没更新文章了，最近恰好在做了一个服务端主动推送消息给客户端的需求，因为是第一次使用Channels模块，踩了不少坑，在这里记录一下。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://zyy.im/posts/django%E4%BD%BF%E7%94%A8websocketchannel%E5%88%9D%E4%BD%93%E9%AA%8C/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-04-09T23:59:15+08:00" />
<meta property="article:modified_time" content="2020-04-09T23:59:15+08:00" />


  <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Django使用Websocket,Channel初体验"/>
<meta name="twitter:description" content="很久都没更新文章了，最近恰好在做了一个服务端主动推送消息给客户端的需求，因为是第一次使用Channels模块，踩了不少坑，在这里记录一下。"/>

  
  
    
  
  
  <link rel="stylesheet" href="https://zyy.im/css/styles.832f844a18081a513455a3bf961dde17b5478d975436c578c9c3cfda4f77c0d89a107619cbe6687e0bf8b145f6590245d268ef2fc6bbd5c89685defaaf00ead0.css" integrity="sha512-gy&#43;EShgIGlE0VaO/lh3eF7VHjZdUNsV4ycPP2k93wNiaEHYZy&#43;Zofgv4sUX2WQJF0mjvL8a71ciWhd76rwDq0A=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  
<link rel="icon" type="image/png" href="https://zyy.im/images/favicon.ico" />

  
  
  
  
</head>


<body class="max-width mx-auto px3 ltr">
  <div class="content index py4">
  <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">All Posts</a></li>
         
        <li><a href="/about">About</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/link">Links</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://zyy.im/posts/2019%E5%B9%B4%E7%9A%84%E4%B8%80%E4%BA%9B%E7%90%90%E4%BA%8B/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://zyy.im/posts/2021%E5%B9%B4%E7%BB%88%E6%80%BB%E7%BB%93/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&text=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&title=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&is_video=false&description=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c&body=Check out this article: https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&title=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&title=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&name=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c&description=%3cp%3e%e5%be%88%e4%b9%85%e9%83%bd%e6%b2%a1%e6%9b%b4%e6%96%b0%e6%96%87%e7%ab%a0%e4%ba%86%ef%bc%8c%e6%9c%80%e8%bf%91%e6%81%b0%e5%a5%bd%e5%9c%a8%e5%81%9a%e4%ba%86%e4%b8%80%e4%b8%aa%e6%9c%8d%e5%8a%a1%e7%ab%af%e4%b8%bb%e5%8a%a8%e6%8e%a8%e9%80%81%e6%b6%88%e6%81%af%e7%bb%99%e5%ae%a2%e6%88%b7%e7%ab%af%e7%9a%84%e9%9c%80%e6%b1%82%ef%bc%8c%e5%9b%a0%e4%b8%ba%e6%98%af%e7%ac%ac%e4%b8%80%e6%ac%a1%e4%bd%bf%e7%94%a8Channels%e6%a8%a1%e5%9d%97%ef%bc%8c%e8%b8%a9%e4%ba%86%e4%b8%8d%e5%b0%91%e5%9d%91%ef%bc%8c%e5%9c%a8%e8%bf%99%e9%87%8c%e8%ae%b0%e5%bd%95%e4%b8%80%e4%b8%8b%e3%80%82%3c%2fp%3e" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&t=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#什么是websocket">什么是Websocket</a></li>
        <li><a href="#安装配置">安装配置</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <header>
      <h1 class="posttitle" itemprop="name headline">
        Django使用Websocket,Channel初体验
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2020-04-09 23:59:15 &#43;0800 CST" itemprop="datePublished">2020-04-09</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          6 minute read
        </div>
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/python" rel="tag">Python</a>
            
             ,  
            <a class="tag-link" href="/tags/django" rel="tag">Django</a>
            
             ,  
            <a class="tag-link" href="/tags/websocket" rel="tag">Websocket</a>
            
             ,  
            <a class="tag-link" href="/tags/channel" rel="tag">Channel</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <p>很久都没更新文章了，最近恰好在做了一个服务端主动推送消息给客户端的需求，因为是第一次使用Channels模块，踩了不少坑，在这里记录一下。</p>
<h3 id="什么是websocket">什么是Websocket</h3>
<p><a href="https://baike.baidu.com/item/WebSocket/1953845?fr=aladdin">websocket的介绍</a>
<a href="http://www.ruanyifeng.com/blog/2017/05/websocket.html">WebSocket-阮一峰老师</a>
通俗的来说Websocket就是一个双向通道，客户端可以主动给服务端发消息，服务端也可以主动给客户端发送消息。</p>
<p><a href="https://channels.readthedocs.io/en/latest/index.html">Channels</a>是Django里面可以构建websocket的模块，官方文档里说了很清晰了，就是一个以处理WebSocket，聊天协议，IoT协议的模块，基于称为ASGI的Python规范构建。它可以以异步的方式进行。</p>
<h3 id="安装配置">安装配置</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>python2: pip install <span style="color:#ff79c6">-</span>U channels
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>python3: pip3 install <span style="color:#ff79c6">-</span>U channels
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#6272a4"># 添加到yourproject.settings</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>INSTALLED_APPS <span style="color:#ff79c6">=</span> (
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>    <span style="color:#f1fa8c">&#39;django.contrib.auth&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>    <span style="color:#f1fa8c">&#39;django.contrib.contenttypes&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>    <span style="color:#f1fa8c">&#39;django.contrib.sessions&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>    <span style="color:#f1fa8c">&#39;django.contrib.sites&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>    <span style="color:#ff79c6">...</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>    <span style="color:#f1fa8c">&#39;channels&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#6272a4"># yourproject/routing.py</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#ff79c6">from</span> channels.routing <span style="color:#ff79c6">import</span> ProtocolTypeRouter
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>application <span style="color:#ff79c6">=</span> ProtocolTypeRouter({
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>    <span style="color:#6272a4"># Empty for now (http-&gt;django views is added by default)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>})
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#6272a4"># 修改settings文件，yourproject/settings,添加下面一行内容</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>ASGI_APPLICATION <span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;yourproject.routing.application&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>
</code></pre></div><p>启用之后，通道就会将自己集成到Django中，并控制runserver命令</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#6272a4"># 启动之后命令行变成 ASGI/channels</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>Starting ASGI/Channels version 2.4.0 development server at https://127.0.0.1:8000/
</code></pre></div><p>下面是在实际中编写的一个模块，主要用websocket连接通道，然后服务端主动推送消息.聊天室的例子大家可以在网上搜一下有很多，我在这里就不多做描写了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1</span><span style="color:#6272a4"># 目录结构</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2</span>yourproject/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3</span> - yourproject/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4</span>    - asgi.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5</span>    - routing.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6</span>    - wsgi.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7</span>    - settings.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8</span>    - urls.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9</span> - chat/
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10</span>    - routing.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11</span>    - consumers.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12</span>    - controller.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13</span> - manage.py
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15</span><span style="color:#6272a4"># youproject/routing.py</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16</span>from channels.routing import ProtocolTypeRouter, URLRouter
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17</span>from django.conf.urls import url
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18</span>from chat import routing
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19</span><span style="color:#8be9fd;font-style:italic">application</span> <span style="color:#ff79c6">=</span> ProtocolTypeRouter<span style="color:#ff79c6">({</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20</span>    <span style="color:#6272a4"># 没有做权限校验</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21</span>    <span style="color:#f1fa8c">&#34;websocket&#34;</span>: URLRouter<span style="color:#ff79c6">(</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22</span>      chat.routing.websocket_urlpatterns
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23</span>    <span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24</span><span style="color:#ff79c6">})</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26</span><span style="color:#6272a4"># chat/routing.py</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27</span>from django.conf.urls import re_path
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28</span>from monitor.consumers import AsyncConsumer
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30</span><span style="color:#8be9fd;font-style:italic">websocket_urlpatterns</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">[</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31</span>    <span style="color:#6272a4"># api router setting</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32</span>    re_path<span style="color:#ff79c6">(</span>r<span style="color:#f1fa8c">&#39;ws/chat/&#39;</span>, AsyncConsumer<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33</span><span style="color:#ff79c6">]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35</span><span style="color:#6272a4"># 官方文档一般建议使用AsyncWebsocketConsumer</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36</span><span style="color:#6272a4"># 原文默认情况下编写SyncConsumers，并且仅在以下情况下使用AsyncConsumers：通过异步处理来改善的事情</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37</span><span style="color:#6272a4"># 如果想要在其他模块主动推送消息给客户端，必须使用通道，通道分为Redis和内存通道（生产中不建议使用）</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38</span><span style="color:#6272a4"># 配置通道层</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39</span><span style="color:#6272a4"># yourproject/settings.py</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40</span><span style="color:#8be9fd;font-style:italic">CHANNEL_LAYERS</span> <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41</span>    <span style="color:#f1fa8c">&#34;default&#34;</span>: <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42</span>        <span style="color:#f1fa8c">&#34;BACKEND&#34;</span>: <span style="color:#f1fa8c">&#34;channels_redis.core.RedisChannelLayer&#34;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43</span>        <span style="color:#f1fa8c">&#34;CONFIG&#34;</span>: <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44</span>            <span style="color:#f1fa8c">&#34;hosts&#34;</span>: <span style="color:#ff79c6">[(</span><span style="color:#f1fa8c">&#34;127.0.0.1&#34;</span>, 6379<span style="color:#ff79c6">)]</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45</span>        <span style="color:#ff79c6">}</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46</span>    <span style="color:#ff79c6">}</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47</span><span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48</span><span style="color:#6272a4"># chat/consumers.py</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49</span>from channels.generic.websocket import AsyncWebsocketConsumer
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50</span>from monitor import CHANNEL_NAME
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51</span>from redis_cache import REDIS_CONN
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52</span>import json
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54</span>class AsyncConsumer<span style="color:#ff79c6">(</span>AsyncWebsocketConsumer<span style="color:#ff79c6">)</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55</span>    async def connect<span style="color:#ff79c6">(</span>self<span style="color:#ff79c6">)</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56</span>        <span style="color:#f1fa8c">&#34;&#34;&#34;
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57</span><span style="color:#f1fa8c">        连接时触发 并且分配一个self.channel_name名称可以存数据库
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58</span><span style="color:#f1fa8c">        这里我存入redis 主要方便
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59</span><span style="color:#f1fa8c">        &#34;&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60</span>        REDIS_CONN.lpush<span style="color:#ff79c6">(</span>CHANNEL_NAME, self.channel_name<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61</span>        await self.accept<span style="color:#ff79c6">()</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63</span>    <span style="color:#6272a4"># Receive message from WebSocket</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64</span>    async def receive<span style="color:#ff79c6">(</span>self, <span style="color:#8be9fd;font-style:italic">text_data</span><span style="color:#ff79c6">=</span>None, <span style="color:#8be9fd;font-style:italic">bytes_data</span><span style="color:#ff79c6">=</span>None<span style="color:#ff79c6">)</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66</span>        <span style="color:#6272a4"># text_data_json = json.loads(text_data)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67</span>        <span style="color:#6272a4"># message = text_data_json[&#39;message&#39;]</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68</span>        <span style="color:#6272a4"># 接受信息并回复</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69</span>        await self.send<span style="color:#ff79c6">(</span><span style="color:#8be9fd;font-style:italic">text_data</span> <span style="color:#ff79c6">=</span> json.dumps<span style="color:#ff79c6">(</span>text_data<span style="color:#ff79c6">))</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71</span>    async def disconnect<span style="color:#ff79c6">(</span>self, close_code<span style="color:#ff79c6">)</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72</span>        <span style="color:#6272a4"># 将关闭的连接从群组中移除</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73</span>        <span style="color:#8be9fd;font-style:italic">results</span> <span style="color:#ff79c6">=</span> REDIS_CONN.lrange<span style="color:#ff79c6">(</span>CHANNEL_NAME, 0, REDIS_CONN.llen<span style="color:#ff79c6">(</span>CHANNEL_NAME<span style="color:#ff79c6">))</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74</span>        <span style="color:#ff79c6">for</span> index, item in enumerate<span style="color:#ff79c6">(</span>results<span style="color:#ff79c6">)</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75</span>            <span style="color:#ff79c6">if</span> self.channel_name <span style="color:#ff79c6">==</span> item:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76</span>                REDIS_CONN.lrem<span style="color:#ff79c6">(</span>CHANNEL_NAME, index, item<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77</span>        await self.close<span style="color:#ff79c6">()</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79</span>    <span style="color:#6272a4"># 主动推送的事件处理方法</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80</span>    async def push_message<span style="color:#ff79c6">(</span>self, event<span style="color:#ff79c6">)</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81</span>        <span style="color:#8be9fd;font-style:italic">data</span> <span style="color:#ff79c6">=</span> json.dumps<span style="color:#ff79c6">(</span>event<span style="color:#ff79c6">[</span><span style="color:#f1fa8c">&#34;text&#34;</span><span style="color:#ff79c6">])</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82</span>        await self.send<span style="color:#ff79c6">(</span><span style="color:#8be9fd;font-style:italic">text_data</span> <span style="color:#ff79c6">=</span> data<span style="color:#ff79c6">)</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84</span><span style="color:#6272a4"># chat/controller.py</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85</span>from channels.layers import get_channel_layer
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86</span>from asgiref.sync import async_to_sync
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87</span>from monitor import CHANNEL_NAME
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88</span>from redis_cache import REDIS_CONN
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89</span><span style="color:#6272a4"># 官方例子，异步推送消息</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90</span><span style="color:#8be9fd;font-style:italic">channel_layer</span> <span style="color:#ff79c6">=</span> get_channel_layer<span style="color:#ff79c6">()</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91</span>await channel_layer.send<span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;channel_name&#34;</span>, <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92</span>    <span style="color:#f1fa8c">&#34;type&#34;</span>: <span style="color:#f1fa8c">&#34;chat.message&#34;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93</span>    <span style="color:#f1fa8c">&#34;text&#34;</span>: <span style="color:#f1fa8c">&#34;Hello there!&#34;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94</span><span style="color:#ff79c6">})</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95</span><span style="color:#6272a4"># 同步推送消息，调用函数即可推送</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96</span>def push_chat_message<span style="color:#ff79c6">(</span>data<span style="color:#ff79c6">)</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97</span>    <span style="color:#f1fa8c">&#34;&#34;&#34;
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98</span><span style="color:#f1fa8c">    从redis拿到已经连接的通道名称
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99</span><span style="color:#f1fa8c">    &#34;&#34;&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100</span>    <span style="color:#8be9fd;font-style:italic">channel_layer</span> <span style="color:#ff79c6">=</span> get_channel_layer<span style="color:#ff79c6">()</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101</span>    <span style="color:#6272a4"># 循环redis中的channel_name，并且推送消息</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102</span>    <span style="color:#8be9fd;font-style:italic">results</span> <span style="color:#ff79c6">=</span> REDIS_CONN.lrange<span style="color:#ff79c6">(</span>CHANNEL_NAME, 0, REDIS_CONN.llen<span style="color:#ff79c6">(</span>CHANNEL_NAME<span style="color:#ff79c6">))</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103</span>    <span style="color:#ff79c6">for</span> channel in results:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104</span>        async_to_sync<span style="color:#ff79c6">(</span>channel_layer.send<span style="color:#ff79c6">)(</span>channel,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105</span>            <span style="color:#ff79c6">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106</span>                <span style="color:#6272a4"># consumer中的事件处理方法,建议为事件类型加上前缀如`push.`避免冲突.</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107</span>                <span style="color:#f1fa8c">&#34;type&#34;</span>: <span style="color:#f1fa8c">&#34;push.message&#34;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108</span>                <span style="color:#f1fa8c">&#34;text&#34;</span>: data,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109</span>            <span style="color:#ff79c6">}</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110</span>        <span style="color:#ff79c6">)</span>
</code></pre></div><p>以上就是单通道推送消息的例子，第一次使用也有很多地方不清楚，这块只是做个记录，根据网上看到的一些资料，再总结一下。如果想要了解聊天室的例子，大家可以去网上搜一下，有很多，官方文档也有<a href="https://channels.readthedocs.io/en/latest/tutorial/index.html">chan_examplte</a>.还望大佬们轻拍.</p>
    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">All Posts</a></li>
         
          <li><a href="/about">About</a></li>
         
          <li><a href="/tags">Tags</a></li>
         
          <li><a href="/link">Links</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#什么是websocket">什么是Websocket</a></li>
        <li><a href="#安装配置">安装配置</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&text=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&title=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&is_video=false&description=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c&body=Check out this article: https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&title=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&title=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&name=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c&description=%3cp%3e%e5%be%88%e4%b9%85%e9%83%bd%e6%b2%a1%e6%9b%b4%e6%96%b0%e6%96%87%e7%ab%a0%e4%ba%86%ef%bc%8c%e6%9c%80%e8%bf%91%e6%81%b0%e5%a5%bd%e5%9c%a8%e5%81%9a%e4%ba%86%e4%b8%80%e4%b8%aa%e6%9c%8d%e5%8a%a1%e7%ab%af%e4%b8%bb%e5%8a%a8%e6%8e%a8%e9%80%81%e6%b6%88%e6%81%af%e7%bb%99%e5%ae%a2%e6%88%b7%e7%ab%af%e7%9a%84%e9%9c%80%e6%b1%82%ef%bc%8c%e5%9b%a0%e4%b8%ba%e6%98%af%e7%ac%ac%e4%b8%80%e6%ac%a1%e4%bd%bf%e7%94%a8Channels%e6%a8%a1%e5%9d%97%ef%bc%8c%e8%b8%a9%e4%ba%86%e4%b8%8d%e5%b0%91%e5%9d%91%ef%bc%8c%e5%9c%a8%e8%bf%99%e9%87%8c%e8%ae%b0%e5%bd%95%e4%b8%80%e4%b8%8b%e3%80%82%3c%2fp%3e" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fzyy.im%2fposts%2fdjango%25E4%25BD%25BF%25E7%2594%25A8websocketchannel%25E5%2588%259D%25E4%25BD%2593%25E9%25AA%258C%2f&t=Django%e4%bd%bf%e7%94%a8Websocket%2cChannel%e5%88%9d%e4%bd%93%e9%aa%8c" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="$('#share-footer').toggle();return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2022  AuuuNya 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">All Posts</a></li>
         
        <li><a href="/about">About</a></li>
         
        <li><a href="/tags">Tags</a></li>
         
        <li><a href="/link">Links</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>

<script src=/js/code-copy.js></script>



  


<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>

</html>