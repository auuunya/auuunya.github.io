<!DOCTYPE html>
<html lang="zh">
  <head>
    <title>Golangä¸Šä¼ æ–‡ä»¶åˆ°ä¸ƒç‰›äº‘ | AuuuNya Blog</title>

    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">    
<meta name="viewport" content="width=device-width,minimum-scale=1">
<meta name="description" content="
æœ€è¿‘è€å¤§è¯´è¦åœ¨ç½‘ç«™çš„åå°é‡Œåšä¸€ä¸ªOSSé…ç½®ï¼Œåå°å†™å¥½ï¼Œå›¾ç‰‡ç›´æ¥ä¸Šä¼ åˆ°äº‘å‚¨å­˜é‡Œé¢ï¼Œå°ç”Ÿä¸æ‰ï¼ŒæŸ¥èµ„æ–™çœ‹æ–‡ç« ï¼Œæ”¹äº†Nå¤šBUGä¹‹åæ‰åšäº†ä¸€ä¸ªåŸºæœ¬çš„ä¸Šä¼ ç³»ç»Ÿ,ä¸‹é¢æ˜¯ä¸€äº›åœ¨æ•²ä»£ç ä¸­ç»å†çš„BUGæˆ–è€…å¯¹ä¸€äº›æ–¹æ³•çš„è§è§£
">
<meta name="generator" content="Hugo 0.129.0">


  <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">


<link rel="stylesheet" href="/css/style.css">



<link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon" />








  </head>

  <body>
    <nav class="navigation">
	
		<a href="/"> <span class="arrow">â†</span>é¦–é¡µ</a>
	
	<a href="/posts">å½’æ¡£</a>
	<a href="/tags">æ ‡ç­¾</a>
	<a href="/about">å…³äº</a>

	

	
</nav>


    <main class="main">
      

<section id="single">
    <h1 class="title">Golangä¸Šä¼ æ–‡ä»¶åˆ°ä¸ƒç‰›äº‘</h1>

    <div class="tip">
        <time datetime="2018-02-27 18:20:36 &#43;0800 CST">2018å¹´02æœˆ27æ—¥</time>
        <span class="split">
          Â·
        </span>
        <span>
          324å­—
        </span>
        <span class="split">
          Â·
        </span>
        <span>
          2åˆ†é’Ÿ
        </span>
    </div>

    
    


    <div class="content">
      <hr>
<p>æœ€è¿‘è€å¤§è¯´è¦åœ¨ç½‘ç«™çš„åå°é‡Œåšä¸€ä¸ªOSSé…ç½®ï¼Œåå°å†™å¥½ï¼Œå›¾ç‰‡ç›´æ¥ä¸Šä¼ åˆ°äº‘å‚¨å­˜é‡Œé¢ï¼Œå°ç”Ÿä¸æ‰ï¼ŒæŸ¥èµ„æ–™çœ‹æ–‡ç« ï¼Œæ”¹äº†Nå¤šBUGä¹‹åæ‰åšäº†ä¸€ä¸ªåŸºæœ¬çš„ä¸Šä¼ ç³»ç»Ÿ,ä¸‹é¢æ˜¯ä¸€äº›åœ¨æ•²ä»£ç ä¸­ç»å†çš„BUGæˆ–è€…å¯¹ä¸€äº›æ–¹æ³•çš„è§è§£</p>
<hr>
<h3 id="è·å–">è·å– <a href="#%e8%8e%b7%e5%8f%96" class="anchor">ğŸ”—</a></h3><p>é¦–å…ˆè¦è·å–çš„æ˜¯ä¸ƒç‰›äº‘å®˜æ–¹çš„SDK</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#ff79c6">go</span> get <span style="color:#ff79c6">-</span>u github.com<span style="color:#ff79c6">/</span>qiniu<span style="color:#ff79c6">/</span>api.v7
</span></span></code></pre></div><h3 id="ä¸ƒç‰›äº‘">ä¸ƒç‰›äº‘ <a href="#%e4%b8%83%e7%89%9b%e4%ba%91" class="anchor">ğŸ”—</a></h3><ul>
<li><a href="https://www.qiniu.com/" target="_blank" rel="noopener">ä¸ƒç‰›äº‘</a>æ²¡æœ‰å¸å·çš„å»æ³¨å†Œä¸€ä¸ªå¸å·ã€‚</li>
<li><a href="https://portal.qiniu.com/user/key" target="_blank" rel="noopener">ä¸ªäººä¸­å¿ƒ</a>æœ‰è´¦å·çš„ç›´æ¥è¿›ä¸ªäººä¸­å¿ƒï¼Œå»æŸ¥çœ‹ç§˜é’¥	AccessKey/SecretKey</li>
</ul>
<h3 id="ä»£ç ">ä»£ç  <a href="#%e4%bb%a3%e7%a0%81" class="anchor">ğŸ”—</a></h3><p>ä¸€äº›å¸¸å˜é‡</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#8be9fd;font-style:italic">const</span> (
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	<span style="color:#6272a4">//æœ¬åœ°ä¿å­˜çš„æ–‡ä»¶å¤¹åç§°
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#6272a4"></span>	upload_path <span style="color:#8be9fd">string</span> = <span style="color:#f1fa8c">&#34;/files/&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#8be9fd;font-style:italic">var</span> (
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>	<span style="color:#6272a4">//BUCKETæ˜¯ä½ åœ¨å­˜å‚¨ç©ºé—´çš„åç§°
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#6272a4"></span>	ACCESS_KEY = <span style="color:#f1fa8c">&#34;******EA09VCy5EfN_*******************&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>	SECRET_KEY = <span style="color:#f1fa8c">&#34;******-yvwcYwImN6F*******************&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>	BUCKET     = <span style="color:#f1fa8c">&#34;bucket&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>)
</span></span></code></pre></div><h5 id="webç«¯ä»£ç "><code>WEB</code>ç«¯ä»£ç  <a href="#web%e7%ab%af%e4%bb%a3%e7%a0%81" class="anchor">ğŸ”—</a></h5><p><strong>è·å–ä¸Šä¼ çš„æ–‡ä»¶</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">uploadHandle</span>(w http.ResponseWriter, r <span style="color:#ff79c6">*</span>http.Request) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	<span style="color:#6272a4">//ä»è¯·æ±‚å½“ä¸­åˆ¤æ–­æ–¹æ³•
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#6272a4"></span>	<span style="color:#ff79c6">if</span> r.Method <span style="color:#ff79c6">==</span> <span style="color:#f1fa8c">&#34;GET&#34;</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>		tmp, err <span style="color:#ff79c6">:=</span> template.<span style="color:#50fa7b">ParseFiles</span>(<span style="color:#f1fa8c">&#34;templates/upload.html&#34;</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>		<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>			fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;æ¨¡ç‰ˆæ¸²æŸ“å¤±è´¥&#34;</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>		tmp.<span style="color:#50fa7b">Execute</span>(w, <span style="color:#ff79c6">nil</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>	} <span style="color:#ff79c6">else</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>		<span style="color:#6272a4">//è·å–æ–‡ä»¶å†…å®¹ è¦è¿™æ ·è·å–
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#6272a4"></span>		file, head, err <span style="color:#ff79c6">:=</span> r.<span style="color:#50fa7b">FormFile</span>(<span style="color:#f1fa8c">&#34;file&#34;</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>		<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>			fmt.<span style="color:#50fa7b">Println</span>(err)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>			<span style="color:#ff79c6">return</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>		<span style="color:#ff79c6">defer</span> file.<span style="color:#50fa7b">Close</span>()
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>		<span style="color:#6272a4">//åˆ›å»ºæ–‡ä»¶å¤¹
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#6272a4"></span>		pwd, _ <span style="color:#ff79c6">:=</span> os.<span style="color:#50fa7b">Getwd</span>()
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>		<span style="color:#6272a4">//æ–‡ä»¶å¤¹å­˜åœ¨çš„è¯ä¼šè¿”å›ä¸€ä¸ªé”™è¯¯ï¼Œå¯ä»¥ç”¨`_`æŠ›å‡ºå»
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#6272a4"></span>		err = os.<span style="color:#50fa7b">Mkdir</span>(pwd<span style="color:#ff79c6">+</span>upload_path, os.ModePerm)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>		<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>			fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;dir is create Error&#34;</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>		fW, err <span style="color:#ff79c6">:=</span> os.<span style="color:#50fa7b">Create</span>(pwd <span style="color:#ff79c6">+</span> upload_path <span style="color:#ff79c6">+</span> head.Filename)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>		<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>			fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;æ–‡ä»¶åˆ›å»ºå¤±è´¥&#34;</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>			<span style="color:#ff79c6">return</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>		fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#ff79c6">*</span>fW)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>		<span style="color:#ff79c6">defer</span> fW.<span style="color:#50fa7b">Close</span>()
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>		<span style="color:#6272a4">//å¤åˆ¶æ–‡ä»¶ï¼Œä¿å­˜åˆ°æœ¬åœ°
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#6272a4"></span>		_, err = io.<span style="color:#50fa7b">Copy</span>(fW, file)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>		<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>			fmt.<span style="color:#50fa7b">Println</span>(<span style="color:#f1fa8c">&#34;æ–‡ä»¶ä¿å­˜å¤±è´¥&#34;</span>)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>			<span style="color:#ff79c6">return</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>		}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>		<span style="color:#6272a4">//è°ƒç”¨ä¸ƒç‰›ä¸Šä¼ å‡½æ•°
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span><span style="color:#6272a4"></span>		<span style="color:#50fa7b">upload_qiniu</span>(pwd <span style="color:#ff79c6">+</span> upload_path <span style="color:#ff79c6">+</span> head.Filename)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>		http.<span style="color:#50fa7b">Redirect</span>(w, r, <span style="color:#f1fa8c">&#34;/&#34;</span>, http.StatusFound)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span>}
</span></span></code></pre></div><p><strong>ä¸ƒç‰›äº‘ä¸Šä¼ å‡½æ•°</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#8be9fd;font-style:italic">func</span> <span style="color:#50fa7b">upload_qiniu</span>(filePath <span style="color:#8be9fd">string</span>) {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>	key <span style="color:#ff79c6">:=</span> <span style="color:#f1fa8c">&#34;github-x.png&#34;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>	<span style="color:#6272a4">//ä¸Šä¼ å‡­è¯,å…³äºå‡­è¯è¿™å—å¤§å®¶å¯ä»¥å»çœ‹çœ‹å®˜æ–¹æ–‡æ¡£
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#6272a4"></span>	putPolicy <span style="color:#ff79c6">:=</span> storage.PutPolicy{
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>		Scope: BUCKET,
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>	mac <span style="color:#ff79c6">:=</span> qbox.<span style="color:#50fa7b">NewMac</span>(ACCESS_KEY, SECRET_KEY)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>	upToken <span style="color:#ff79c6">:=</span> putPolicy.<span style="color:#50fa7b">UploadToken</span>(mac)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>	cfg <span style="color:#ff79c6">:=</span> storage.Config{}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>	<span style="color:#6272a4">//ç©ºé—´å¯¹åº”æœºæˆ¿
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">//å…¶ä¸­å…³äºZoneå¯¹è±¡å’Œæœºæˆ¿çš„å…³ç³»å¦‚ä¸‹ï¼š
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">//	æœºæˆ¿	Zoneå¯¹è±¡
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">//	åä¸œ	storage.ZoneHuadong
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">//	ååŒ—	storage.ZoneHuabei
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">//	åå—	storage.ZoneHuanan
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">//	åŒ—ç¾	storage.ZoneBeimei
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#6272a4"></span>	<span style="color:#6272a4">//ä¸ƒç‰›äº‘å­˜å‚¨ç©ºé—´è®¾ç½®é¦–é¡µæœ‰å­˜å‚¨åŒºåŸŸ
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#6272a4"></span>	cfg.Zone = <span style="color:#ff79c6">&amp;</span>storage.ZoneHuanan
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>	<span style="color:#6272a4">//ä¸å¯ç”¨HTTPSåŸŸå
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#6272a4"></span>	cfg.UseHTTPS = <span style="color:#ff79c6">false</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>	<span style="color:#6272a4">//ä¸ä½¿ç”¨CNDåŠ é€Ÿ
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#6272a4"></span>	cfg.UseCdnDomains = <span style="color:#ff79c6">false</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>	<span style="color:#6272a4">//æ„å»ºä¸Šä¼ è¡¨å•å¯¹è±¡
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#6272a4"></span>	formUploader <span style="color:#ff79c6">:=</span> storage.<span style="color:#50fa7b">NewFormUploader</span>(<span style="color:#ff79c6">&amp;</span>cfg)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>	ret <span style="color:#ff79c6">:=</span> storage.PutRet{}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>	<span style="color:#6272a4">// å¯é€‰
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#6272a4"></span>	putExtra <span style="color:#ff79c6">:=</span> storage.PutExtra{
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span>		Params: <span style="color:#8be9fd;font-style:italic">map</span>[<span style="color:#8be9fd">string</span>]<span style="color:#8be9fd">string</span>{
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>			<span style="color:#f1fa8c">&#34;x:name&#34;</span>: <span style="color:#f1fa8c">&#34;github logo&#34;</span>,
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>		},
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>	err <span style="color:#ff79c6">:=</span> formUploader.<span style="color:#50fa7b">PutFile</span>(context.<span style="color:#50fa7b">Background</span>(), <span style="color:#ff79c6">&amp;</span>ret, upToken, key, filePath, <span style="color:#ff79c6">&amp;</span>putExtra)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>	<span style="color:#ff79c6">if</span> err <span style="color:#ff79c6">!=</span> <span style="color:#ff79c6">nil</span> {
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>		fmt.<span style="color:#50fa7b">Println</span>(err)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span>		<span style="color:#ff79c6">return</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>	}
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>	fmt.<span style="color:#50fa7b">Println</span>(ret.Key, ret.Hash)
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>}
</span></span></code></pre></div><ul>
<li><strong>æ•´ä¸ªä»£ç æœ€ä¸»è¦çš„æ˜¯å­˜å‚¨åœ¨æœ¬åœ°çš„è·¯å¾„ï¼Œç„¶ååœ¨ä¸Šä¼ å‡½æ•°é‡Œé¢è¯»å–è·¯å¾„ä¸Šä¼ æ–‡ä»¶</strong></li>
<li><strong>å¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–çš„æ–¹ä¾¿ï¼Œå¿«æ·çš„æ–¹æ³•ï¼Œæˆ‘ä¹Ÿè¿˜åœ¨æ‘¸ç´¢ä¸­ï¼Œè¿™ä¸ªç®—æ˜¯è¿™å‡ å¤©å­¦ä¹ çš„ä¸€ä¸ªæ€»ç»“ï¼Œåç»­è¿˜ä¼šä¿®æ”¹ä»£ç ï¼Œåšä¸€äº›æ‰©å±•</strong></li>
<li><a href="https://github.com/ma1ive/Go/blob/master/qiniu/main.go" target="_blank" rel="noopener">å®Œæ•´ä»£ç åœ°å€</a></li>
</ul>
    </div>

    
        <div class="tags">
            
                <a href="https://blog.auuu.me/tags/golang">golang</a>
            
        </div>
    
    
    

</section>


    </main>
    
    <footer id="footer">
    

    <div class="copyright">
    
       Â© Copyright 
       2025 
       <span class="split">
        <svg fill="#bbbbbb" width="15" height="15" version="1.1" id="heart-15" xmlns="http://www.w3.org/2000/svg" width="15px" height="15px" viewBox="0 0 15 15">
  <path d="M13.91,6.75c-1.17,2.25-4.3,5.31-6.07,6.94c-0.1903,0.1718-0.4797,0.1718-0.67,0C5.39,12.06,2.26,9,1.09,6.75&#xA;&#x9;C-1.48,1.8,5-1.5,7.5,3.45C10-1.5,16.48,1.8,13.91,6.75z"/>
</svg>
       </span>
       
    
    </div>

    
      <div class="powerby">
        Powered by <a href='http://www.gohugo.io/'>Hugo</a> Theme By <a href='https://github.com/nodejh/hugo-theme-mini'>nodejh</a>
      </div>
    
</footer>



  </body>
</html>
